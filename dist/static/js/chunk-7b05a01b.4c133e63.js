(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b05a01b"],{"864b":function(e,t,n){},"8d10":function(e,t,n){"use strict";n("864b")},dbf9:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["withScopeId"])("data-v-6d880f4a");Object(o["pushScopeId"])("data-v-6d880f4a");var a=Object(o["createVNode"])("div",{id:"maps"},null,-1);Object(o["popScopeId"])();var c=r((function(e,t,n,r,c,i){return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",null,Object(o["toDisplayString"])(e.test[0]),1),a],64)})),i=(n("c7cd"),n("5530")),s=(n("99af"),n("4160"),n("d81d"),n("159b"),n("2909")),l=(n("96cf"),n("1da1")),u=(n("b0c0"),n("d4ec")),d=n("bee2"),h=n("ade3"),p=n("5a89"),f=n("4721"),m=function(){function e(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(u["a"])(this,e),Object(h["a"])(this,"camera",null),Object(h["a"])(this,"scene",null),Object(h["a"])(this,"renderer",null),Object(h["a"])(this,"controls",null),Object(h["a"])(this,"mouse",new p["u"]),Object(h["a"])(this,"raycaster",new p["l"]),Object(h["a"])(this,"selectData",null),Object(h["a"])(this,"K",200),Object(h["a"])(this,"init",(function(){n.scene=new p["m"],n.fixed.length>0&&n.fixed.map((function(e){n.add(e)})),n.dynamic.length>0&&n.dynamic.map((function(e){e.map((function(e){n.add(e)}))}));var e=new p["j"](13421772);e.position.set(0,-1200,400),n.scene.add(e);var t=new p["a"](4473924);n.scene.add(t);var o=n.container.clientWidth,r=n.container.clientHeight,a=o/r,c=400;n.camera=new p["h"](-c*a,c*a,c,200-c),n.camera.position.set(0,-800,200),n.camera.lookAt(n.scene.position),n.axisHelper=new p["b"](250),n.scene.add(n.axisHelper),n.renderer=new p["w"]({antialias:!0,alpha:!0}),n.renderer.setSize(o,r),n.renderer.setClearColor(15658734,0),n.container.appendChild(n.renderer.domElement)})),Object(h["a"])(this,"render",(function(){requestAnimationFrame(n.render),n.renderer.render(n.scene,n.camera)})),Object(h["a"])(this,"createControls",(function(){n.controls=new f["a"](n.camera,n.renderer.domElement),addEventListener("resize",(function(e){n.renderer.setSize(n.container.clientWidth,n.container.clientHeight)}),!1)})),Object(h["a"])(this,"onMouseMove",(function(e){n.mouse.x=e.clientX/window.innerWidth*2-1,n.mouse.y=-e.clientY/window.innerHeight*2+1,n.raycaster.setFromCamera(n.mouse,n.camera);for(var t=n.raycaster.intersectObjects(n.scene.children),o=0;o<t.length;o++)if("Sprite"===t[o].object.type){t[o].object.material.color.set(16711680),n.selectData=t[o].object.name,console.log(t[o].object.name);t[o].point;return console.log("模型数量".concat(n.scene.children.length)),console.log(n.controls.target),void console.log(n.camera.position)}})),Object(h["a"])(this,"changeCamera",(function(e,t,o){n.camera.lookAt(new p["v"](e,t,o)),console.log(n.camera.top),n.cameraFov(),console.log(n.camera.top)})),Object(h["a"])(this,"cameraFov",(function(){n.camera.updateProjectionMatrix(),n.renderer.render(n.scene,n.camera)})),this.fixed=o,this.container=t;for(var r=arguments.length,a=new Array(r>2?r-2:0),c=2;c<r;c++)a[c-2]=arguments[c];this.dynamic=a}return Object(d["a"])(e,[{key:"add",value:function(e){this.scene.add(e)}},{key:"remove",value:function(e){this.scene.remove(e)}}]),e}(),b=m,v=(n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("841c"),n("bc3a")),g=n.n(v);function w(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}var j="/api/";j=1==w("ip")?"http://123.56.85.24:5000/api/":2==w("ip")?"http://ddc.lycent.cn/api":"http://localhost:8080/api/";var O=g.a.create({baseURL:j,timeout:5e3});console.log(j),O.interceptors.request.use((function(e){var t=window.localStorage.getItem("accessToken");return t&&(e.headers.common.Authorization=t),e}),(function(e){return Promise.reject(e)})),O.interceptors.response.use((function(e){var t=e.data;return 200!==e.status?Promise.reject(new Error(t.message||"Error")):t}),(function(e){return console.log("err"+e),Promise.reject(e)}));var y=O;function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/map";return y({url:e,method:"get",showLoading:!1})}var E={get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o=arguments.length>3?arguments[3]:void 0,r=e.geometry.coordinates[0],a=[];r.forEach((function(e){a.push(new p["u"](e[0]/100,e[1]/100))}));for(var c=new p["p"](a),i=new p["n"](c.getPoints(n)),s=arguments.length,l=new Array(s>4?s-4:0),u=4;u<s;u++)l[u-4]=arguments[u];l.length>0&&l.map((function(e){var t,n=[];t="string"===typeof e?JSON.parse(e).geometry.coordinates[0]:e.geometry.coordinates[0],t.forEach((function(e){n.push(new p["u"](e[0]/100,e[1]/100))}));var o=new p["p"](n),r=new p["i"](o.getPoints(200));i.holes.push(r)}));var d=new p["d"](i,{amount:t,bevelEnabled:!1}),h=new p["g"](o),f=new p["f"](d,h);return f}},S=function(){var e=Object(o["reactive"])({map:null,floorData:null,fixed:[],test:["我是测试数据"]}),t=[],n=function(t,n){e.map=new b(t,n),e.map.init(),e.map.render(),e.map.createControls()},r=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=document.getElementById("maps"),e.next=3,x("/map/floor");case 3:r=e.sent,a(r),c(),n(o,t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o["onMounted"])((function(){r()}));var a=function(t){try{var n=[];t.forEach((function(e){var t={floor:1,base:"",hole:[],room:[],roomColor:16729344};t.floor=e.floor,e.children&&e.children.forEach((function(e){1==e.category?t.base=JSON.parse(e.data):2==e.category?t.hole.push(JSON.parse(e.data)):3==e.category&&(t.room.push(JSON.parse(e.data)),t.roomColor=e.color||16729344)})),n.push(t)})),e.floorData=n}catch(o){e.floorData=[]}},c=function(){e.floorData.forEach((function(n){var o=E.get.apply(E,[n.base,20,200,{color:4251856}].concat(Object(s["a"])(n.hole)));o.position.set(0,0,100*(n.floor-1)),e.fixed.push(o),t.push(o),n.room.length>0&&n.room.forEach((function(o){var r=E.get(o,30,4,{color:n.roomColor,transparent:!0,opacity:.4});r.position.set(0,0,100*(n.floor-1)),e.fixed.push(r),t.push(r)}))}))};return{obj:e,init:n}},k={methods:{},mounted:function(){console.log(this.fixed)},setup:function(){var e=S(),t=e.obj;e.init;return Object(i["a"])({},Object(o["toRefs"])(t))}};n("8d10");k.render=c,k.__scopeId="data-v-6d880f4a";t["default"]=k}}]);